<!-- =======================================================
   MATCHS – UI/UX REWORK DARK MODE ÉLÉGANT
======================================================= -->
<div class="min-h-screen text-[var(--Black)] dark:text-[var(--Blanc)] px-4 sm:px-8 py-8 transition-colors duration-500">

  <!-- =======================================================
     STATUT DE CHARGEMENT
  ======================================================= -->
  <div *ngIf="loading" class="flex flex-col items-center justify-center py-20 text-gray-500 dark:text-gray-400 animate-fadeIn">
    <svg class="animate-spin h-10 w-10 mb-3 text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)]" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 
               5.291A7.962 7.962 0 014 12H0c0 3.042 
               1.135 5.824 3 7.938l3-2.647z">
      </path>
    </svg>
    <p class="text-sm font-medium">Chargement des matchs...</p>
  </div>

  <!-- =======================================================
     MESSAGE D'ERREUR
  ======================================================= -->
  <div *ngIf="error" class="text-center py-8 text-red-600 dark:text-red-400 font-semibold animate-fadeIn" role="alert">
    {{ error }}
  </div>

  <!-- =======================================================
     LISTE DES MATCHS
  ======================================================= -->
  <div *ngIf="!loading && !error" class="flex flex-col gap-6 mt-6">

    <!-- Aucun match -->
    <p *ngIf="activeMatches.length === 0" class="text-center text-gray-500 dark:text-gray-400 py-8 text-base">
      Aucun match disponible pour le moment.
    </p>

    <!-- Cartes de matchs -->
    <div *ngFor="let match of activeMatches"
         class="p-6 bg-white/80 dark:bg-[var(--Gris)]/30 backdrop-blur-xl rounded-2xl shadow-md 
                hover:shadow-2xl transition-all duration-500 flex flex-col md:flex-row 
                items-center justify-between gap-6 border border-transparent 
                hover:border-[var(--Rouge)] dark:hover:border-[var(--Rouge-Clair)] cursor-pointer"
         [class.opacity-50]="match.status !== 'En directe'"
         (click)="match.status === 'En directe' ? openMatch(match) : null">

      <!-- ÉQUIPE A -->
      <div class="flex items-center gap-4 flex-1 justify-start">
        <img [src]="match.logoA" [alt]="match.equipeA"
             class="w-16 h-16 rounded-full shadow-sm ring-2 ring-[var(--Rouge)]/30 dark:ring-[var(--Rouge-Clair)]/40 bg-white object-cover">
        <div>
          <p class="font-semibold text-lg">{{ match.equipeA }}</p>
          <p *ngIf="match.scoreA !== null && match.scoreA !== undefined"
             class="text-3xl font-extrabold leading-tight"
             [ngClass]="scoreColor(match.scoreA, match.scoreB, 'A')">
             {{ match.scoreA }}
          </p>
        </div>
      </div>

      <!-- VS -->
      <div class="text-2xl font-extrabold text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)] mx-6 select-none">VS</div>

      <!-- ÉQUIPE B -->
      <div class="flex items-center gap-4 flex-1 justify-end">
        <div class="text-right">
          <p class="font-semibold text-lg">{{ match.equipeB }}</p>
          <p *ngIf="match.scoreB !== null && match.scoreB !== undefined"
             class="text-3xl font-extrabold leading-tight"
             [ngClass]="scoreColor(match.scoreA, match.scoreB, 'B')">
             {{ match.scoreB }}
          </p>
        </div>
        <img [src]="match.logoB" [alt]="match.equipeB"
             class="w-16 h-16 rounded-full shadow-sm ring-2 ring-[var(--Rouge)]/30 dark:ring-[var(--Rouge-Clair)]/40 bg-white object-cover">
      </div>

      <!-- STATUT -->
      <div class="mt-2 md:mt-0 text-center text-[var(--Black)] dark:text-[var(--Blanc)]">
        <p class="font-medium">{{ translateStatus(match.status) }}</p>
        <p *ngIf="match.status === 'En directe'" class="text-sm text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)]">
          {{ getTimeLeft(match) }}
        </p>
      </div>
    </div>
  </div>

  <!-- =======================================================
     POP-UP MODIFICATION SCORE
  ======================================================= -->
  <div *ngIf="selectedMatch"
       class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 dark:bg-black/70 backdrop-blur-sm p-4">
    
    <div class="bg-white dark:bg-[var(--Gris)]/40 backdrop-blur-2xl rounded-2xl shadow-2xl 
                border border-[var(--Rouge)]/20 dark:border-[var(--Rouge-Clair)]/20 
                w-full max-w-md relative animate-fadeIn p-6">
      
      <h2 class="text-xl font-bold mb-6 text-center text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)]">
        Modifier le score
      </h2>

      <!-- SCORES -->
      <div class="flex items-center justify-around mb-8">
        <!-- Équipe A -->
        <div class="text-center">
          <p class="font-semibold mb-2">{{ selectedMatch.equipeA }}</p>
          <input type="number" [(ngModel)]="selectedMatch.scoreA"
                 class="w-20 text-center rounded-lg py-1 border border-gray-300 dark:border-gray-600 
                        bg-white/70 dark:bg-black/40 focus:ring-2 focus:ring-[var(--Rouge)] 
                        dark:focus:ring-[var(--Rouge-Clair)] outline-none transition" min="0">
        </div>

        <!-- VS -->
        <div class="text-2xl font-extrabold text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)] select-none">VS</div>

        <!-- Équipe B -->
        <div class="text-center">
          <p class="font-semibold mb-2">{{ selectedMatch.equipeB }}</p>
          <input type="number" [(ngModel)]="selectedMatch.scoreB"
                 class="w-20 text-center rounded-lg py-1 border border-gray-300 dark:border-gray-600 
                        bg-white/70 dark:bg-black/40 focus:ring-2 focus:ring-[var(--Rouge)] 
                        dark:focus:ring-[var(--Rouge-Clair)] outline-none transition" min="0">
        </div>
      </div>

      <!-- BOUTONS -->
      <div class="flex justify-end gap-4">
        <button (click)="closeMatch()"
                class="px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 
                       hover:bg-gray-300 dark:hover:bg-gray-600 transition">
          Annuler
        </button>

        <button (click)="saveScore()"
                class="px-4 py-2 rounded-lg bg-[var(--Rouge)] dark:bg-[var(--Rouge-Clair)] 
                       text-white font-medium hover:scale-105 hover:shadow-lg transition">
          Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>
