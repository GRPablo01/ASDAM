<!-- ========== UI/UX REFONTE – ZERO BREAKING CHANGES ========== -->
<div class="-mt-15 min-h-screen bg-[var(--Blanc)] dark:bg-[var(--Black)]/90 text-[var(--Black)] flex">

  <!-- ---------- SIDEBAR ---------- -->
  <aside id="sidebar"
    class="mt-15 w-20 lg:w-64 bg-[var(--Gris)]/20 backdrop-blur-xl border-r-2 border-[var(--Rouge)] flex flex-col shrink-0 transition-all duration-300 shadow-sm">

    <!-- Logo -->
    <header class="px-4 py-5 flex items-center justify-center lg:justify-start gap-3 border-b border-red-700">
      <img src="assets/LOGO.png" alt="Logo club" class="w-10 h-10 ">
      <h1 class="hidden lg:block text-xl font-bold tracking-tight text-[var(--Blanc)]">
        {{ (currentUser?.role || 'Invité') | uppercase }}
      </h1>
    </header>

    <!-- =======================================================
     NAVIGATION – MODE CLAIR / SOMBRE ÉLÉGANT
======================================================= -->
    <nav class="flex-1 px-2 lg:px-4 py-4 space-y-1 transition-colors duration-300
text-[var(--Black)] dark:text-[var(--Blanc)]">

      <button *ngFor="let item of navItems" (click)="setSection(item.key)"
        [attr.aria-current]="selectedSection === item.key ? 'page' : null" [ngClass]="selectedSection === item.key 
? 'bg-[var(--Rouge)] text-white shadow-md dark:shadow-[0_0_10px_var(--Rouge)]' 
: 'hover:bg-gray-100/70 dark:hover:bg-[var(--Blanc)]/70 hover:text-[var(--Blanc)] dark:hover:text-[var(--Blanc)]'"
        [title]="item.label" class="w-full flex items-center justify-center lg:justify-start gap-3 px-3 py-2.5 rounded-lg
     transition-all duration-200 group relative overflow-hidden">

        <!-- Icône -->
        <i [class]="item.icon + ' w-5 text-center transition-transform duration-200 group-hover:scale-110'"></i>

        <!-- Label -->
        <span class="hidden lg:inline text-sm font-medium tracking-wide">{{ item.label }}</span>

        <!-- Indicateur actif -->
        <span *ngIf="selectedSection === item.key" class="absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 
     bg-[var(--Blanc)] dark:bg-[var(--Rouge-Clair)] rounded-r-full"></span>

        <!-- Effet lumineux -->
        <span *ngIf="selectedSection === item.key"
          class="absolute inset-0 bg-[var(--Rouge)]/10 dark:bg-[var(--Rouge)]/20 blur-lg rounded-lg -z-10"></span>

      </button>
    </nav>

  </aside>

  <!-- ---------- MAIN CONTENT ---------- -->
  <main class="flex-1 px-4 sm:px-6 lg:px-10 py-8 overflow-y-auto">

    <!-- Global feedback -->
    <section aria-live="polite" class="mb-4 space-y-2">
      <div *ngIf="successMatches || successCommuniques || successPosts"
        class="p-3 rounded-lg bg-emerald-50 text-emerald-700 border border-emerald-200 text-sm">
        {{ successMatches || successCommuniques || successPosts }}
      </div>
      <div *ngIf="errorMatches || errorCommuniques || errorPosts"
        class="p-3 rounded-lg bg-rose-50 text-rose-700 border border-rose-200 text-sm">
        {{ errorMatches || errorCommuniques || errorPosts }}
      </div>
    </section>

    <!-- =======================================================
        SECTION MATCHS – DESIGN CLAIR / SOMBRE PREMIUM
    ======================================================= -->
    <section *ngIf="selectedSection === 'match'" class="mt-15 animate-fadeIn transition-colors duration-500">

      <!-- ====== TITRE ====== -->
      <h2 class="text-2xl font-bold mb-6 text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)]">
        Matchs
      </h2>

      <!-- ====== LOADING ====== -->
      <div *ngIf="loadingMatches" class="text-[var(--Gris)]/60 italic text-sm dark:text-[var(--Blanc)]/40">
        Chargement…
      </div>

      <!-- ====== LISTE DES MATCHS ====== -->
      <div *ngIf="!loadingMatches && finishedMatches.length"
        class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

        <article *ngFor="let match of finishedMatches" class="group relative rounded-2xl p-5 border-2 transition-all duration-300
                bg-white/80 dark:bg-[var(--Black)]/60
                border-[var(--Rouge)] hover:border-[var(--Rouge-Clair)]
                shadow-sm hover:shadow-[0_0_15px_var(--Rouge-Clair)/30]
                hover:-translate-y-1 backdrop-blur-sm">

          <!-- ====== HEADER MATCH ====== -->
          <div class="flex items-start justify-between mb-3">
            <h3 class="font-semibold text-[var(--Black)] dark:text-[var(--Blanc)]">
              {{ match.equipeA }}
              <span class="text-gray-400 dark:text-gray-500 font-normal">vs</span>
              {{ match.equipeB }}
            </h3>

            <span class="text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-700
                        dark:bg-gray-800 dark:text-gray-300">
              {{ match.categorie }}
            </span>
          </div>

          <!-- ====== INFOS MATCH ====== -->
          <ul class="space-y-1 text-sm text-[var(--Black)] dark:text-[var(--Blanc)]">
            <li><strong>Date :</strong> {{ match.date | date:'dd/MM/yyyy' }}</li>
            <li><strong>Lieu :</strong> {{ match.lieu }}</li>
            <li><strong>Type :</strong> {{ match.typeMatch || 'Non précisé' }}</li>
          </ul>

          <!-- ====== SCORE ====== -->
          <div class="mt-4 text-center">
            <span class="text-2xl font-extrabold text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)]">
              {{ match.scoreA ?? '-' }} – {{ match.scoreB ?? '-' }}
            </span>
          </div>

          <!-- ====== BOUTON SUPPRESSION ====== -->
          <button (click)="supprimerMatch(match._id)" aria-label="Supprimer le match" class="absolute top-4 right-4 w-8 h-8 grid place-content-center rounded-full
                        bg-rose-100 text-rose-600 hover:bg-rose-200
                        dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-900/60
                        opacity-0 group-hover:opacity-100 transition-all duration-200">
            <i class="fas fa-trash text-xs"></i>
          </button>

        </article>
      </div>

      <!-- ====== AUCUN MATCH ====== -->
      <p *ngIf="!loadingMatches && finishedMatches.length === 0"
        class="text-gray-500 dark:text-gray-400 italic text-sm">
        Aucun match terminé.
      </p>
    </section>


    <!-- =======================================================
        SECTION ACTUALITÉS – MODE CLAIR / SOMBRE PREMIUM
    ======================================================= -->
    <section *ngIf="selectedSection === 'actus'" class="mt-15 animate-fadeIn transition-colors duration-500">

      <!-- ====== TITRE ====== -->
      <h2 class="text-2xl font-bold mb-6 text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)]">
        Actualités
      </h2>

      <!-- ====== LOADING ====== -->
      <div *ngIf="loadingPosts" class="text-[var(--Gris)]/60 italic text-sm dark:text-[var(--Blanc)]/40">
        Chargement…
      </div>

      <!-- ====== LISTE DES POSTS ====== -->
      <div *ngIf="!loadingPosts && filteredPosts.length" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

        <article *ngFor="let post of filteredPosts; let idx = index" class="group relative rounded-2xl p-5 border-2 transition-all duration-300
                bg-white/80 dark:bg-[var(--Black)]/60
                border-[var(--Rouge)] hover:border-[var(--Rouge-Clair)]
                shadow-sm hover:shadow-[0_0_15px_var(--Rouge-Clair)/30]
                hover:-translate-y-1 backdrop-blur-sm">

          <!-- ====== HEADER DU POST ====== -->
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div
                class="w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm
                          bg-[var(--Rouge)] text-white dark:bg-[var(--Rouge-Clair)] dark:text-[var(--Black)] shadow-sm">
                {{ post.initials || 'U' }}
              </div>
              <div class="text-sm">
                <p class="font-semibold leading-tight text-[var(--Black)] dark:text-[var(--Blanc)]">
                  {{ post.user || 'Utilisateur' }}
                </p>
                <time class="text-gray-400 text-xs dark:text-gray-500">
                  {{ post.createdAt | date:'short' }}
                </time>
              </div>
            </div>

            <!-- ====== BOUTON SUPPRESSION ====== -->
            <button (click)="deletePost(post, idx)" aria-label="Supprimer le post" class="absolute top-4 right-4 w-8 h-8 grid place-content-center rounded-full
                          bg-rose-100 text-rose-600 hover:bg-rose-200
                          dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-900/60
                          opacity-0 group-hover:opacity-100 transition-all duration-200">
              <i class="fas fa-trash text-xs"></i>
            </button>
          </div>

          <!-- ====== CONTENU DU POST ====== -->
          <p class="text-[var(--Black)] dark:text-[var(--Blanc)] text-sm mb-3 whitespace-pre-line leading-relaxed">
            {{ post.content }}
          </p>

          <!-- ====== MÉDIAS ====== -->
          <figure *ngIf="post.mediaUrl" class="mb-3">
            <img *ngIf="post.mediaType === 'image'" [src]="post.mediaUrl" alt="Média du post"
              class="rounded-lg w-full object-cover max-h-56 border border-gray-100 dark:border-gray-700" />
            <video *ngIf="post.mediaType === 'video'" [src]="post.mediaUrl" controls
              class="rounded-lg w-full max-h-56 border border-gray-100 dark:border-gray-700"></video>
          </figure>

          <!-- ====== FOOTER : ACTIONS ====== -->
          <footer class="flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400 mt-2">
            <span class="flex items-center gap-1">
              <i class="fas fa-heart text-red-500"></i>{{ post.likes }}
            </span>
            <span class="flex items-center gap-1">
              <i class="fas fa-share"></i>{{ post.shares }}
            </span>
          </footer>

        </article>
      </div>

      <!-- ====== AUCUN POST ====== -->
      <p *ngIf="!loadingPosts && !filteredPosts.length" class="text-gray-500 dark:text-gray-400 italic text-sm">
        Aucun post.
      </p>
    </section>


    <!-- =======================================================
        SECTION JOUEURS – MODE CLAIR / SOMBRE PREMIUM
    ======================================================= -->
    <section *ngIf="selectedSection === 'joueurs'" class="mt-15 animate-fadeIn transition-colors duration-500">

      <!-- ===== TITRE ===== -->
      <h2 class="text-2xl font-bold mb-6 text-[var(--Rouge)] dark:text-[var(--Rouge)]">
        Joueurs
      </h2>

      <!-- ===== CHARGEMENT ===== -->
      <div *ngIf="loadingJoueurs" class="text-[var(--Gris)]/60 italic text-sm dark:text-[var(--Blanc)]/40">
        Chargement…
      </div>

      <!-- ===== LISTE DES JOUEURS ===== -->
      <div *ngIf="!loadingJoueurs && joueurs.length > 0" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

        <div *ngFor="let joueur of joueurs" class="group relative rounded-2xl p-5 border-2 transition-all duration-300
                    bg-white/80 dark:bg-[var(--Black)]/60
                    border-[var(--Rouge)] hover:border-[var(--Rouge-Clair)]
                    shadow-sm hover:shadow-[0_0_15px_var(--Rouge-Clair)/30]
                    hover:-translate-y-1 backdrop-blur-sm flex flex-col justify-between">

          <!-- ===== HEADER JOUEUR ===== -->
          <div class="flex items-center gap-4">
            <div class="w-14 h-14 flex items-center justify-center rounded-full 
                        bg-[var(--Rouge)] text-white dark:bg-[var(--Rouge-Clair)]
                        text-lg font-bold shadow-sm">
              {{ (joueur.prenom?.[0] || '') + (joueur.nom?.[0] || '') }}
            </div>
            <div>
              <h3 class="text-lg font-semibold text-[var(--Black)] dark:text-[var(--Blanc)] leading-tight">
                {{ joueur.prenom }} {{ joueur.nom }}
              </h3>
            </div>
          </div>

          <!-- ===== INFOS ===== -->
          <div class="mt-4 border-t border-red-700 dark:border-gray-700 pt-3 text-sm 
                      text-[var(--Blanc)] dark:text-[var(--Blanc)]">
            <p><strong>Catégorie :</strong> {{ joueur.categorie || joueur.equipe || '—' }}</p>
          </div>

          <!-- ===== EFFET DE SURVOL ===== -->
          <div class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-10
                      bg-[var(--Rouge)] dark:bg-[var(--Rouge-Clair)] transition-all duration-300"></div>
        </div>

      </div>

      <!-- ===== AUCUN JOUEUR ===== -->
      <div *ngIf="!loadingJoueurs && joueurs.length === 0"
        class="text-center text-[var(--Gris)] dark:text-gray-400 italic mt-4">
        Aucun joueur trouvé.
      </div>

    </section>


    <!-- ================= MON MATCH ================= -->
    <section *ngIf="selectedSection === 'mon match'" class="mt-15 animate-fadeIn transition-colors duration-500">
      <h2 class="text-2xl font-bold mb-6 text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)]">Votre Match</h2>
      <app-match-vue></app-match-vue>
    </section>


    <!-- ================= COMMUNIQUER ================= -->
    <section *ngIf="selectedSection === 'communiquer'" class="mt-15 animate-fadeIn transition-colors duration-500">
      <h2 class="text-2xl font-bold mb-6 text-[var(--Rouge)] dark:text-[var(--Rouge-Clair)]">Communications</h2>

      <div *ngIf="loadingCommuniques" class="text-[var(--Gris)]/60 italic text-sm dark:text-[var(--Blanc)]/40">
        Chargement…
      </div>

      <div *ngIf="!loadingCommuniques && communiques.length"
        class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
        <article *ngFor="let c of communiques" class="group relative rounded-2xl p-5 border-2 transition-all duration-300
                        bg-white/80 dark:bg-[var(--Black)]/60
                        border-[var(--Rouge)] hover:border-[var(--Rouge-Clair)]
                        shadow-sm hover:shadow-[0_0_15px_var(--Rouge-Clair)/30]
                        hover:-translate-y-1 backdrop-blur-sm">

          <div class="flex items-start justify-between mb-3">
            <h3 class="font-semibold text-[var(--Black)] dark:text-[var(--Blanc)] truncate pr-8">{{ c.titre }}</h3>
            <span class="text-xs bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-2 py-1 rounded-full">
              Info
            </span>
          </div>

          <p class="text-[var(--Black)] dark:text-[var(--Blanc)] text-sm mb-4 line-clamp-3">{{ c.contenu }}</p>

          <ul class="space-y-1 text-xs text-[var(--Black)] dark:text-[var(--Blanc)]">
            <li><strong>Auteur :</strong> {{ c.auteur }}</li>
            <li><strong>Date :</strong> {{ c.date | date:'dd/MM/yyyy à HH:mm' }}</li>
          </ul>

          <button (click)="supprimerCommunique(c._id)" aria-label="Supprimer" class="absolute top-4 right-4 w-8 h-8 grid place-content-center bg-rose-100 text-rose-600 
                        rounded-full opacity-0 group-hover:opacity-100 hover:bg-rose-200 transition">
            <i class="fas fa-trash text-xs"></i>
          </button>
        </article>
      </div>

      <p *ngIf="!loadingCommuniques && !communiques.length"
        class="text-[var(--Black)] dark:text-[var(--Blanc)] italic text-sm">Aucun communiqué.</p>
    </section>


    <!-- ================= CRÉATION ================= -->
    <section *ngIf="selectedSection === 'bouton'" class="mt-15 animate-fadeIn transition-colors duration-500">
      <h2 class="text-2xl font-bold mb-6 text-[var(--Rouge)] dark:text-[var(--Rouge)]">Création</h2>

      <div
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 justify-items-center">
        <app-creer-convoque></app-creer-convoque>
        <app-creer-event></app-creer-event>
        <app-creer-match></app-creer-match>
        <app-creer-post></app-creer-post>
      </div>
    </section>


    <!-- ================= CLASSEMENT ================= -->
    <section *ngIf="selectedSection === 'classement'"
      class="mt-15 animate-fadeIn max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 transition-colors duration-500">

      <h2 class="text-3xl font-extrabold mb-8 text-[var(--Rouge)] dark:text-[var(--Rouge)] tracking-tight">
        Classement
      </h2>

      <div *ngIf="userRole === 'admin' || userRole === 'superadmin'" class="flex flex-wrap justify-center gap-3 mb-8">
        <button *ngFor="let cat of categories" (click)="selectCategorie(cat)" [ngClass]="selectedCategorie === cat 
                  ? 'bg-[var(--Rouge)] text-white dark:bg-[var(--Rouge-Clair)] dark:text-[var(--Black)]' 
                  : 'bg-white dark:bg-[var(--Black)] text-[var(--Rouge)] border-[var(--Rouge)]'"
          class="px-5 py-2 rounded-full border-2 font-semibold shadow-sm hover:scale-105 transition-all duration-300">
          {{ cat }}
        </button>
      </div>

      <div *ngIf="classementFiltre.length; else noClassement" class="space-y-8">
        <article *ngFor="let c of classementFiltre"
          class="border-2 border-[var(--Rouge)] bg-white dark:bg-[var(--Black)] rounded-2xl transition-all duration-300 overflow-hidden shadow-sm hover:shadow-[0_0_15px_var(--Rouge-Clair)/30]">

          <header
            class="bg-[var(--Rouge)] dark:bg-[var(--Rouge)] text-white px-6 py-4 flex justify-between items-center">
            <h3 class="text-lg font-semibold tracking-wide">{{ c.categorie }}</h3>
            <button type="button" [disabled]="isSaving" (click)="saveCategorie(c)" class="px-4 py-2 rounded-lg font-semibold bg-[var(--Black)] dark:bg-[var(--Black)]/20 text-white
                          shadow hover:bg-gray-100 active:scale-95 disabled:opacity-60 transition-all duration-300">
              <span *ngIf="!isSaving"><i class="fas fa-save mr-2"></i> Enregistrer tout</span>
              <span *ngIf="isSaving"><i class="fas fa-spinner fa-spin mr-2"></i> Sauvegarde...</span>
            </button>
          </header>

          <div class="overflow-x-auto">
            <style>
              /* ====== SUPPRIMER LES FLÈCHES DES INPUT NUMBER ====== */
              input[type=number]::-webkit-inner-spin-button,
              input[type=number]::-webkit-outer-spin-button {
                -webkit-appearance: none;
                margin: 0;
              }

              input[type=number] {
                -moz-appearance: textfield;
                /* Firefox */
              }
            </style>

            <table class="min-w-full text-sm text-[var(--Black)] dark:text-[var(--Blanc)]">
              <thead
                class="bg-[var(--Blanc)]/20 dark:bg-[var(--Gris)] text-[var(--Black)] dark:text-[var(--Blanc)] uppercase tracking-wider text-xs">
                <tr>
                  <th class="px-4 py-3 text-center">#</th>
                  <th class="px-4 py-3 text-left">Équipe</th>
                  <th class="px-4 py-3 text-center">Pts</th>
                  <th class="px-4 py-3 text-center">J</th>
                  <th class="px-4 py-3 text-center">G</th>
                  <th class="px-4 py-3 text-center">N</th>
                  <th class="px-4 py-3 text-center">P</th>
                  <th class="px-4 py-3 text-center">BP</th>
                  <th class="px-4 py-3 text-center">BC</th>
                  <th class="px-4 py-3 text-center">Diff</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let eq of c.equipes; let i = index"
                  class="border-t border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"
                  [ngClass]="isHighlightedEquipe(eq) ? 'bg-blue-100 dark:bg-blue-900/40 font-bold' : ''">
                  <td class="px-4 py-3 text-center font-semibold">{{ i + 1 }}</td>
                  <td class="px-4 py-3 font-medium">{{ eq.equipe }}</td>

                  <!-- Colonnes éditables sans flèches -->
                  <td class="px-4 py-3 text-center">
                    <input type="number" [(ngModel)]="eq.pts"
                      class="w-14 text-center border border-gray-300 dark:border-gray-600 rounded-md 
                          bg-[var(--Blanc)]/20 dark:bg-[var(--Gris)] focus:ring-2 focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]">
                  </td>
                  <td class="px-4 py-3 text-center">
                    <input type="number" [(ngModel)]="eq.jo"
                      class="w-14 text-center border border-gray-300 dark:border-gray-600 rounded-md 
                          bg-[var(--Blanc)]/20 dark:bg-[var(--Gris)] focus:ring-2 focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]">
                  </td>
                  <td class="px-4 py-3 text-center">
                    <input type="number" [(ngModel)]="eq.g"
                      class="w-14 text-center border border-gray-300 dark:border-gray-600 rounded-md 
                          bg-[var(--Blanc)]/20 dark:bg-[var(--Gris)] focus:ring-2 focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]">
                  </td>
                  <td class="px-4 py-3 text-center">
                    <input type="number" [(ngModel)]="eq.n"
                      class="w-14 text-center border border-gray-300 dark:border-gray-600 rounded-md 
                          bg-[var(--Blanc)]/20 dark:bg-[var(--Gris)] focus:ring-2 focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]">
                  </td>
                  <td class="px-4 py-3 text-center">
                    <input type="number" [(ngModel)]="eq.p"
                      class="w-14 text-center border border-gray-300 dark:border-gray-600 rounded-md 
                          bg-[var(--Blanc)]/20 dark:bg-[var(--Gris)] focus:ring-2 focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]">
                  </td>
                  <td class="px-4 py-3 text-center">
                    <input type="number" [(ngModel)]="eq.bp"
                      class="w-14 text-center border border-gray-300 dark:border-gray-600 rounded-md 
                          bg-[var(--Blanc)]/20 dark:bg-[var(--Gris)] focus:ring-2 focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]">
                  </td>
                  <td class="px-4 py-3 text-center">
                    <input type="number" [(ngModel)]="eq.bc"
                      class="w-14 text-center border border-gray-300 dark:border-gray-600 rounded-md 
                          bg-[var(--Blanc)]/20 dark:bg-[var(--Gris)] focus:ring-2 focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]">
                  </td>
                  <td class="px-4 py-3 text-center font-semibold">
                    <span [ngClass]="eq.bp - eq.bc >= 0 ? 'text-green-600' : 'text-red-600'">
                      {{ eq.bp - eq.bc }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

        </article>
      </div>

      <ng-template #noClassement>
        <div class="text-center py-12">
          <p class="text-[var(--Black)] dark:text-[var(--Blanc)] italic text-lg">Aucun classement disponible pour le
            moment.</p>
        </div>
      </ng-template>
    </section>


    <!-- ================= PROFIL ================= -->
    <section *ngIf="selectedSection === 'profil'"
      class="mt-15 animate-fadeIn max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 transition-colors duration-500">
      <h2 class="text-2xl font-bold mb-6 text-[var(--Rouge)] dark:text-[var(--Rouge)]">Profil</h2>

      <div
        class="bg-white dark:bg-[var(--Black)]/60 border-2 border-[var(--Rouge)] rounded-xl p-6 space-y-4 shadow-sm backdrop-blur-sm">
        <div class="flex items-center gap-4">
          <div class="w-16 h-16 rounded-full bg-[var(--Rouge)] dark:bg-[var(--Rouge)] text-white
                      flex items-center justify-center font-bold text-xl">
            {{ currentUser?.initiale || '?' }}
          </div>
          <div>
            <p class="font-semibold text-[var(--Black)] dark:text-[var(--Blanc)]">{{ currentUser?.prenom }} {{
              currentUser?.nom }}</p>
            <p class="text-[var(--Black)] dark:text-[var(--Blanc)] text-sm">{{ currentUser?.role }}</p>
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-gray-600 dark:text-gray-400 text-sm mb-1">Prénom</label>
            <input type="text" [(ngModel)]="currentUser!.prenom" class="w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2
                  bg-[var(--Black)]/20 dark:bg-[var(--Gris)]/10  text-[var(--Black)] dark:text-[var(--Blanc)] focus:ring-2
                          focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]">
          </div>
          <div>
            <label class="block text-gray-600 dark:text-gray-400 text-sm mb-1">Nom</label>
            <input type="text" [(ngModel)]="currentUser!.nom" class="w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2
                  bg-[var(--Black)]/20 dark:bg-[var(--Gris)]/10  text-[var(--Black)] dark:text-[var(--Blanc)] focus:ring-2
                          focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]">
          </div>
          <div class="sm:col-span-2">
            <label class="block text-gray-600 dark:text-gray-400 text-sm mb-1">Équipe</label>
            <input type="text" [(ngModel)]="currentUser!.equipe" class="w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2
                          bg-[var(--Black)]/20 dark:bg-[var(--Gris)]/10 text-[var(--Black)] dark:text-[var(--Blanc)] focus:ring-2
                          focus:ring-[var(--Rouge)] dark:focus:ring-[var(--Rouge-Clair)]" readonly>
          </div>
        </div>

        <div class="flex justify-end gap-3 mt-4">
          <button (click)="updateProfile()" class="px-4 py-2 bg-[var(--Rouge)] dark:bg-[var(--Rouge-Foncé)] text-white
                        font-semibold rounded-lg hover:scale-105 transition">
            Enregistrer
          </button>
          <button (click)="deleteAccount()"
            class="px-4 py-2 bg-[var(--Rouge)] dark:bg-[var(--Rouge-Foncé)] text-white font-semibold rounded-lg hover:scale-105 transition">
            Supprimer mon compte
          </button>
        </div>
      </div>
    </section>


    <!-- ================= DÉCONNEXION ================= -->
    <section *ngIf="selectedSection === 'logout'"
      class="mt-15 animate-fadeIn text-center py-20 transition-colors duration-500">
      <h2 class="text-2xl font-bold mb-6 text-[var(--Rouge)] dark:text-[var(--Rouge)]">Déconnexion</h2>
      <p class="text-[var(--Black)] dark:text-[var(--Blanc)] mb-6">Vous êtes sur le point de vous déconnecter de votre
        compte.</p>
      <button (click)="logout()" class="px-6 py-3 bg-[var(--Rouge)] dark:bg-[var(--Rouge)] text-white
                    font-semibold rounded-lg hover:scale-105 transition">
        Se déconnecter
      </button>
    </section>

  </main>
</div>

<!-- ---------- ANIMATIONS ---------- -->
<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(8px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeIn {
    animation: fadeIn .3s ease-out;
  }
</style>