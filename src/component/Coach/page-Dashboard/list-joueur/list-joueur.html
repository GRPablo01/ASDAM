<div
  aria-label="Liste des joueurs"
>

  <!-- Liste des joueurs sous forme de cards -->
  <div *ngIf="!loading && joueurs.length" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
    <div
      *ngFor="let j of joueurs; trackBy: trackById"
      (click)="openPlayerModal(j)"
      class="cursor-pointer border border-[var(--Rouge)]/20 rounded-2xl p-4 flex flex-col items-center text-center bg-[var(--Blanc)] hover:shadow-lg hover:bg-[var(--Rouge)]/5 transition"
    >
      <!-- Avatar -->
      <div
        class="w-16 h-16 rounded-full bg-gradient-to-br from-[var(--Rouge)] to-[var(--Rouge-Foncé)] flex items-center justify-center text-[var(--Blanc)] font-bold text-lg mb-3"
      >
        {{ j.initiale || '?' }}
      </div>

      <!-- Nom -->
      <p class="font-semibold text-[var(--Black)] truncate mb-2">
        {{ j.prenom }} {{ j.nom }}
      </p>

      <!-- Infos Club / Équipe -->
      <div class="flex flex-wrap justify-center gap-2">
        <span *ngIf="j.club" class="px-2 py-1 text-xs rounded-full bg-[var(--Rouge)]/10 text-[var(--Rouge)]">
          {{ j.club }}
        </span>
        <span *ngIf="j.equipe" class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700">
          {{ j.equipe }}
        </span>
      </div>
    </div>
  </div>

  <!-- Message aucun joueur -->
  <p *ngIf="!loading && !joueurs.length" class="text-center text-gray-500 mt-4">
    Aucun joueur trouvé.
  </p>

</div>

<!-- Modal joueur -->
<div
  *ngIf="showModal && selectedJoueur"
  class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 transition-opacity duration-300"
  [class.opacity-0]="!showModal"
  [class.opacity-100]="showModal"
  (click)="closeModal()"
  role="dialog"
  aria-modal="true"
  [attr.aria-labelledby]="'joueur-modal-title'"
>
  <div
    class="bg-white rounded-2xl p-6 w-11/12 max-w-sm shadow-2xl transform transition-all duration-300 scale-95"
    [class.scale-100]="showModal"
    (click)="$event.stopPropagation()"
  >
    <!-- Bouton fermeture -->
    <button
      (click)="closeModal()"
      aria-label="Fermer"
      class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors"
    >
      <i class="fas fa-times fa-lg"></i>
    </button>

    <!-- Avatar + Nom -->
    <div class="flex items-center gap-4 mb-4">
      <div class="w-14 h-14 rounded-full bg-gradient-to-br from-[var(--Rouge-Foncé)] to-[var(--Rouge)] text-white flex items-center justify-center font-bold text-lg">
        {{ getInitials(selectedJoueur.prenom, selectedJoueur.nom) }}
      </div>
      <div>
        <h2 id="joueur-modal-title" class="text-lg font-semibold text-gray-900">
          {{ selectedJoueur.prenom }} {{ selectedJoueur.nom }}
        </h2>
        <a
          [href]="'mailto:' + selectedJoueur.email"
          class="text-sm text-blue-600 hover:underline"
        >
          {{ selectedJoueur.email || 'Email non disponible' }}
        </a>
      </div>
    </div>

    <!-- Infos -->
    <div class="space-y-2 text-sm text-gray-700">
      <div class="flex items-center gap-2">
        <i class="fas fa-building text-gray-400"></i>
        <span><strong>Club:</strong> {{ selectedJoueur.club || 'ASDAM' }}</span>
      </div>
      <div class="flex items-center gap-2">
        <i class="fas fa-users text-gray-400"></i>
        <span><strong>Équipe:</strong> {{ selectedJoueur.equipe || 'Non renseigné' }}</span>
      </div>
    </div>
  </div>

