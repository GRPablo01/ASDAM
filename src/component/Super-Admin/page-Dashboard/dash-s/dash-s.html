<!-- =========================================================
  SUPER ADMIN – REFONTE UI/UX (ZERO BREAKING CHANGES)
  ========================================================== -->
<div class="min-h-100 bg-[var(--Blanc)] text-[var(--Black)] flex">

    <!-- ---------- SIDEBAR ---------- -->
    <aside class="w-64 lg:w-72 bg-white/70 backdrop-blur-xl border-r border-gray-200/80
                  flex flex-col shadow-lg shrink-0">

        <!-- Logo -->
        <header class="px-6 py-5 flex items-center gap-3 border-b border-gray-200/80">
            <img src="assets/LOGO.ico" alt="Logo club" class="w-10 h-10">
            <h1 class="text-xl font-bold tracking-wide">Super Admin</h1>
        </header>

        <!-- Navigation -->
        <nav class="flex-1 px-4 py-6 space-y-1">
            <button (click)="setSection('match')"
                [ngClass]="selectedSection==='match' ? 'bg-[var(--Rouge)] text-white' : 'hover:bg-gray-100'" class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
                       focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--Rouge)]">
                <i class="fas fa-futbol w-5 text-center"></i>
                <span>Matchs</span>
            </button>

            <button (click)="setSection('actus')"
                [ngClass]="selectedSection==='actus' ? 'bg-[var(--Rouge)] text-white' : 'hover:bg-gray-100'" class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
                       focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--Rouge)]">
                <i class="fas fa-newspaper w-5 text-center"></i>
                <span>Actus</span>
            </button>

            <button (click)="setSection('communiquer')"
                [ngClass]="selectedSection==='communiquer' ? 'bg-[var(--Rouge)] text-white' : 'hover:bg-gray-100'"
                class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
                       focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--Rouge)]">
                <i class="fas fa-bullhorn w-5 text-center"></i>
                <span>Communiquer</span>
            </button>

            <button (click)="setSection('bouton')"
                [ngClass]="selectedSection==='bouton' ? 'bg-[var(--Rouge)] text-white' : 'hover:bg-gray-100'" class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
               focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--Rouge)]">
                <i class="fas fa-plus w-5 text-center"></i>
                <span>Création</span>
            </button>

        </nav>
    </aside>


    <!-- ---------- MAIN CONTENT ---------- -->
    <main class="flex-1 px-4 sm:px-6 lg:px-10 py-8 overflow-y-auto">

        <!-- Global feedback -->
        <section aria-live="polite">
            <div *ngIf="successMatches || successCommuniques || successPosts"
                class="mb-4 p-3 rounded-lg bg-emerald-50 text-emerald-700 border border-emerald-200">
                {{ successMatches || successCommuniques || successPosts }}
            </div>
            <div *ngIf="errorMatches || errorCommuniques || errorPosts"
                class="mb-4 p-3 rounded-lg bg-rose-50 text-rose-700 border border-rose-200">
                {{ errorMatches || errorCommuniques || errorPosts }}
            </div>
        </section>


        <!-- ................................... MATCHS ................................... -->
        <section *ngIf="selectedSection==='match'" class="animate-fadeIn">
            <h2 class="text-3xl font-extrabold mb-6 text-[var(--Rouge)]">Liste des Matchs</h2>

            <div *ngIf="loadingMatches" class="text-gray-500 italic">Chargement des matchs...</div>

            <div *ngIf="!loadingMatches && matches.length" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                <article *ngFor="let match of matches" class="group relative bg-white rounded-2xl border border-gray-200
                          hover:shadow-xl hover:border-[var(--Rouge)] transition-all duration-300 p-5">
                    <div class="flex items-start justify-between mb-3">
                        <h3 class="font-bold text-lg text-[var(--Black)]">{{ match.equipeA }} <span
                                class="text-gray-400">vs</span> {{ match.equipeB }}</h3>
                        <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full">{{ match.categorie
                            }}</span>
                    </div>

                    <ul class="space-y-1 text-sm text-gray-600">
                        <li><strong>Date :</strong> {{ match.date | date:'dd/MM/yyyy' }}</li>
                        <li><strong>Lieu :</strong> {{ match.lieu }}</li>
                        <li><strong>Type :</strong> {{ match.typeMatch || 'Non précisé' }}</li>
                    </ul>

                    <div class="mt-4 mb-2 text-center">
                        <span class="text-2xl font-black text-[var(--Rouge)]">{{ match.scoreA ?? '-' }} – {{
                            match.scoreB ?? '-' }}</span>
                    </div>

                    <button (click)="supprimerMatch(match._id)" aria-label="Supprimer le match" class="absolute top-4 right-4 w-9 h-9 grid place-content-center
                           bg-rose-100 text-rose-600 rounded-full
                           opacity-0 group-hover:opacity-100 transition
                           hover:bg-rose-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-400">
                        <i class="fas fa-trash text-sm"></i>
                    </button>
                </article>
            </div>

            <p *ngIf="!loadingMatches && !matches.length" class="text-gray-500 italic mt-6">Aucun match trouvé.</p>
        </section>


        <!-- ................................... ACTUS ................................... -->
        <section *ngIf="selectedSection==='actus'" class="animate-fadeIn max-w-4xl mx-auto">
            <h2 class="text-3xl font-extrabold mb-2 text-[var(--Rouge)]">Actualités</h2>
            <p class="text-gray-600 mb-8">Publie ou modifie les dernières actualités de ton club.</p>

            <div *ngIf="loadingPosts" class="text-gray-500 italic">Chargement des posts...</div>

            <div *ngIf="!loadingPosts && filteredPosts.length" class="space-y-6">
                <article *ngFor="let post of filteredPosts; let idx = index" class="bg-white rounded-2xl border border-gray-200 p-5
                          hover:shadow-lg transition-shadow duration-300">
                    <header class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-3">
                            <div class="w-11 h-11 rounded-full bg-[var(--Rouge)] text-white
                            flex items-center justify-center font-bold">
                                {{ post.initials || 'U' }}
                            </div>
                            <div>
                                <p class="font-semibold">{{ post.user || 'Utilisateur' }}</p>
                                <time class="text-xs text-gray-500">{{ post.createdAt | date:'dd/MM/yyyy à HH:mm'
                                    }}</time>
                            </div>
                        </div>
                        <button (click)="deletePost(post,idx)" aria-label="Supprimer le post" class="w-9 h-9 grid place-content-center
                             text-rose-500 hover:bg-rose-50 rounded-full transition">
                            <i class="fas fa-trash"></i>
                        </button>
                    </header>

                    <p class="text-gray-800 mb-3 whitespace-pre-line">{{ post.content }}</p>

                    <figure *ngIf="post.mediaUrl" class="mb-4">
                        <img *ngIf="post.mediaType==='image'" [src]="post.mediaUrl" alt="media"
                            class="rounded-xl w-full object-cover max-h-80">
                        <video *ngIf="post.mediaType==='video'" [src]="post.mediaUrl" controls
                            class="rounded-xl w-full max-h-80"></video>
                    </figure>

                    <footer class="flex items-center gap-6 text-sm text-gray-500">
                        <span><i class="fas fa-heart text-red-500 mr-1"></i>{{ post.likes }}</span>
                        <span><i class="fas fa-share mr-1"></i>{{ post.shares }}</span>
                    </footer>
                </article>
            </div>

            <p *ngIf="!loadingPosts && !filteredPosts.length" class="text-gray-500 italic mt-6">Aucun post trouvé.</p>
        </section>


        <!-- ................................... COMMUNIQUER ................................... -->
        <section *ngIf="selectedSection==='communiquer'" class="animate-fadeIn">
            <h2 class="text-3xl font-extrabold mb-6 text-[var(--Rouge)]">Espace Communication</h2>

            <div *ngIf="loadingCommuniques" class="text-gray-500 italic">Chargement des communiqués...</div>

            <div *ngIf="!loadingCommuniques && communiques.length"
                class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                <article *ngFor="let c of communiques" class="group relative bg-white rounded-2xl border border-gray-200
                          hover:shadow-xl hover:border-[var(--Rouge)] transition-all duration-300 p-5">
                    <h3 class="text-lg font-bold text-[var(--Black)] truncate pr-10">{{ c.titre }}</h3>
                    <p class="text-gray-700 mt-2 mb-4 line-clamp-3">{{ c.contenu }}</p>

                    <div class="flex items-center justify-between text-sm text-gray-500">
                        <span><strong>Auteur :</strong> {{ c.auteur }}</span>
                        <span><strong>Date :</strong> {{ c.date | date:'dd/MM/yyyy' }}</span>
                    </div>

                    <button (click)="supprimerCommunique(c._id)" aria-label="Supprimer le communiqué" class="absolute top-4 right-4 w-9 h-9 grid place-content-center
                           bg-rose-100 text-rose-600 rounded-full
                           opacity-0 group-hover:opacity-100 transition
                           hover:bg-rose-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-400">
                        <i class="fas fa-trash text-sm"></i>
                    </button>
                </article>
            </div>

            <p *ngIf="!loadingCommuniques && !communiques.length" class="text-gray-500 italic mt-6">Aucun communiqué
                trouvé.</p>
        </section>

        <!-- ................................... CRÉATION ................................... -->
        <section *ngIf="selectedSection==='bouton'" class="animate-fadeIn">
            <h2 class="text-3xl font-extrabold mb-6 text-[var(--Rouge)]">Création</h2>
          
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 justify-items-center">
              <app-creer-convocations-c></app-creer-convocations-c>
              <app-creer-convocations-c></app-creer-convocations-c>
              <app-creer-event-c></app-creer-event-c>
              <app-creer-match-c></app-creer-match-c>
              <app-creer-post-c></app-creer-post-c>
            </div>
        </section>
          
          
          

    </main>
</div>

<!-- ---------- ANIMATION ---------- -->
<style>
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fadeIn {
        animation: fadeIn .35s ease-out;
    }
</style>