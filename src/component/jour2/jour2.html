<!-- =======================================================
   CALENDRIER – 2 JOURS (AUJOURD’HUI & DEMAIN)
   Design clair, responsive, fluide
======================================================= -->
<div
  class="min-h-100 bg-[var(--Gris)] dark:bg-[var(--Gris)]/90 text-[var(--Black)] dark:text-[var(--Blanc)] p-6 sm:p-10 relative">

  <!-- ========= HEADER ========= -->
  <header
    class="mb-10 p-6 bg-[var(--Gris)] dark:bg-[var(--Gris)]/90 rounded-3xl shadow-xl border border-red-700 transition-all duration-300">

    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">

      <!-- Titre -->
      <div class="flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6">
        <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">
          Aujourd’hui & Demain
        </h1>
      </div>
    </div>

    <!-- Rôle + Publics 
    <div
      class="mt-6 pt-4 border-t border-red-700 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 text-sm">
      <div class="flex items-center gap-2 font-semibold">
        <i class="fas fa-user-shield"></i>
        <span>Rôle : <span class="ml-1">{{ userRole | titlecase }}</span></span>
      </div>

      <div class="flex items-center gap-2 flex-wrap">
        <i class="fas fa-users"></i>
        <span>Accès autorisé :</span>
        <ng-container *ngIf="userPublics.length > 0; else noAccess">
          <span *ngFor="let pub of userPublics"
            class="bg-red-600 text-white px-3 py-1 rounded-full text-xs font-medium">
            {{ pub }}
          </span>
        </ng-container>
        <ng-template #noAccess>
          <span class="italic text-gray-400">Aucun</span>
        </ng-template>
      </div>
    </div>-->
  </header>

  <!-- ==================== GRILLE 2 JOURS ==================== -->
  <section class="grid grid-cols-1 md:grid-cols-2 gap-8">

    <!-- AUJOURD’HUI -->
    <div class="flex flex-col bg-[var(--Blanc)] dark:bg-[var(--Gris)]/90 rounded-2xl shadow-lg border border-red-700 overflow-hidden">

      <div class="text-center font-extrabold text-lg py-4 uppercase tracking-wide bg-gradient-to-r from-[var(--Bleu)] to-[var(--Bleu-Foncé)] text-white">
        Aujourd’hui<br>{{ today | date:'EEEE dd MMMM' }}
      </div>

      <div class="p-5 flex flex-col gap-4">
        <ng-container *ngFor="let evt of getEventsForDay(today)">
          <article (click)="openEventDetails(evt)" [ngClass]="getEventColor(evt)"
            class="group flex flex-col gap-2 p-4 rounded-2xl cursor-pointer text-white hover:scale-105 transition shadow-md">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <i [class]="getEventIcon(evt) + ' text-xl'"></i>
                <h4 class="font-semibold text-lg">{{ evt.title }}</h4>
              </div>
              <span class="bg-white/90 text-gray-900 text-xs px-3 py-1 rounded-full font-medium">
                {{ evt.level }}
              </span>
            </div>
            <div class="text-sm opacity-90">{{ evt.category }}</div>
            <div class="text-sm flex items-center gap-2 opacity-90">
              <i class="far fa-clock"></i> {{ evt.hour }} - {{ evt.endHour }}
            </div>
          </article>
        </ng-container>

        <ng-container *ngFor="let match of getMatchesForDay(today)">
          <div (click)="openMatchDetails(match)"
            class="group flex flex-col p-4 rounded-2xl bg-gradient-to-r from-indigo-600 to-blue-600 text-white cursor-pointer hover:scale-105 transition shadow-md">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-3">
                <img *ngIf="match.logoA" [src]="match.logoA" alt="{{ match.equipeA }}" class="w-10 h-10 rounded-full object-cover border-2 border-white" />
                <span class="font-semibold">{{ match.equipeA }}</span>
              </div>
              <span class="text-sm font-bold">VS</span>
              <div class="flex items-center gap-3">
                <span class="font-semibold">{{ match.equipeB }}</span>
                <img *ngIf="match.logoB" [src]="match.logoB" alt="{{ match.equipeB }}" class="w-10 h-10 rounded-full object-cover border-2 border-white" />
              </div>
            </div>
            <div class="flex items-center justify-between text-sm opacity-85">
              <span>{{ match.lieu }} · {{ match.categorie }}</span>
              <span class="flex items-center gap-1 bg-white/10 px-3 py-1 rounded-full">
                <i class="far fa-clock"></i> {{ match.heureDebut }}
              </span>
            </div>
          </div>
        </ng-container>

        <div *ngIf="getEventsForDay(today).length === 0 && getMatchesForDay(today).length === 0"
          class="flex-1 flex items-center justify-center text-gray-400 italic py-10">
          Aucun événement
        </div>
      </div>
    </div>

    <!-- DEMAIN -->
    <div class="flex flex-col bg-[var(--Blanc)] dark:bg-[var(--Gris)]/90 rounded-2xl shadow-lg border border-red-700 overflow-hidden">

      <div class="text-center font-extrabold text-lg py-4 uppercase tracking-wide bg-gradient-to-r from-[var(--Rouge)] to-[var(--Rouge-Foncé)] text-white">
        Demain<br>{{ tomorrow | date:'EEEE dd MMMM' }}
      </div>

      <div class="p-5 flex flex-col gap-4">
        <ng-container *ngFor="let evt of getEventsForDay(tomorrow)">
          <article (click)="openEventDetails(evt)" [ngClass]="getEventColor(evt)"
            class="group flex flex-col gap-2 p-4 rounded-2xl cursor-pointer text-white hover:scale-105 transition shadow-md">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <i [class]="getEventIcon(evt) + ' text-xl'"></i>
                <h4 class="font-semibold text-lg">{{ evt.title }}</h4>
              </div>
              <span class="bg-white/90 text-gray-900 text-xs px-3 py-1 rounded-full font-medium">
                {{ evt.level }}
              </span>
            </div>
            <div class="text-sm opacity-90">{{ evt.category }}</div>
            <div class="text-sm flex items-center gap-2 opacity-90">
              <i class="far fa-clock"></i> {{ evt.hour }} - {{ evt.endHour }}
            </div>
          </article>
        </ng-container>

        <ng-container *ngFor="let match of getMatchesForDay(tomorrow)">
          <div (click)="openMatchDetails(match)"
            class="group flex flex-col p-4 rounded-2xl bg-gradient-to-r from-indigo-600 to-blue-600 text-white cursor-pointer hover:scale-105 transition shadow-md">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-3">
                <img *ngIf="match.logoA" [src]="match.logoA" alt="{{ match.equipeA }}" class="w-10 h-10 rounded-full object-cover border-2 border-white" />
                <span class="font-semibold">{{ match.equipeA }}</span>
              </div>
              <span class="text-sm font-bold">VS</span>
              <div class="flex items-center gap-3">
                <span class="font-semibold">{{ match.equipeB }}</span>
                <img *ngIf="match.logoB" [src]="match.logoB" alt="{{ match.equipeB }}" class="w-10 h-10 rounded-full object-cover border-2 border-white" />
              </div>
            </div>
            <div class="flex items-center justify-between text-sm opacity-85">
              <span>{{ match.lieu }} · {{ match.categorie }}</span>
              <span class="flex items-center gap-1 bg-white/10 px-3 py-1 rounded-full">
                <i class="far fa-clock"></i> {{ match.heureDebut }}
              </span>
            </div>
          </div>
        </ng-container>

        <div *ngIf="getEventsForDay(tomorrow).length === 0 && getMatchesForDay(tomorrow).length === 0"
          class="flex-1 flex items-center justify-center text-gray-400 italic py-10">
          Aucun événement
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== POPUPS (inchangées) ==================== -->
  <!-- Popup détails événement -->
  <div *ngIf="selectedEvent" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-md p-4">
    <div class="relative w-full max-w-lg bg-[var(--Blanc)] dark:bg-[var(--Gris)] text-[var(--Black)] dark:text-[var(--Blanc)] rounded-3xl shadow-2xl p-6">
      <button (click)="closeEventDetails()" class="absolute top-4 right-4 w-9 h-9 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-[var(--Rouge)] hover:text-white transition">✕</button>
      <header [ngClass]="getEventColor(selectedEvent)" class="w-full p-6 text-white rounded-2xl flex flex-col items-center">
        <i [class]="getEventIcon(selectedEvent) + ' text-3xl mb-2'"></i>
        <h2 class="text-2xl font-bold">{{ selectedEvent.title }}</h2>
        <p class="text-sm opacity-90 mt-2">{{ selectedEvent.category }} • {{ selectedEvent.level }}</p>
      </header>
      <section class="p-4 space-y-3 text-sm">
        <p><strong>Date :</strong> {{ formatFullDate(selectedEvent.day) }}</p>
        <p><strong>Horaire :</strong> {{ selectedEvent.hour }} – {{ selectedEvent.endHour }}</p>
        <p><strong>Responsable :</strong> {{ selectedEvent.coach }}</p>
        <p *ngIf="selectedEvent.description"><strong>Description :</strong> {{ selectedEvent.description }}</p>
      </section>
      <footer *ngIf="canEdit()" class="flex justify-center p-4 border-t">
        <button (click)="deleteEvent(selectedEvent._id)" class="px-4 py-2 rounded-xl bg-[var(--Rouge)] text-white font-semibold shadow">Supprimer</button>
      </footer>
    </div>
  </div>

  <!-- Popup détails match -->
  <div *ngIf="selectedMatch" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-md p-4">
    <div class="relative w-full max-w-lg bg-[var(--Blanc)] dark:bg-[var(--Gris)] text-[var(--Black)] dark:text-[var(--Blanc)] rounded-3xl shadow-2xl p-6">
      <button (click)="closeMatchDetails()" class="absolute top-4 right-4 w-9 h-9 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-[var(--Rouge)] hover:text-white transition">✕</button>
      <header class="bg-gradient-to-r from-indigo-600 to-blue-600 p-6 text-white rounded-2xl flex flex-col items-center gap-4">
        <div class="flex items-center justify-center gap-6">
          <div class="flex flex-col items-center gap-2">
            <img *ngIf="selectedMatch.logoA" [src]="selectedMatch.logoA" alt="{{ selectedMatch.equipeA }}" class="w-14 h-14 rounded-full object-cover border-2 border-white" />
            <span class="text-sm font-medium">{{ selectedMatch.equipeA }}</span>
          </div>
          <span class="text-lg font-bold">VS</span>
          <div class="flex flex-col items-center gap-2">
            <img *ngIf="selectedMatch.logoB" [src]="selectedMatch.logoB" alt="{{ selectedMatch.equipeB }}" class="w-14 h-14 rounded-full object-cover border-2 border-white" />
            <span class="text-sm font-medium">{{ selectedMatch.equipeB }}</span>
          </div>
        </div>
        <p class="text-sm opacity-90 italic">{{ selectedMatch.status | titlecase }}</p>
      </header>
      <section class="p-4 space-y-2 text-sm">
        <p><strong>Date :</strong> {{ formatFullDate(selectedMatch.date) }}</p>
        <p><strong>Heure :</strong> {{ selectedMatch.heureDebut }} – {{ selectedMatch.heureFin }}</p>
        <p><strong>Lieu :</strong> {{ selectedMatch.lieu }}</p>
        <p><strong>Catégorie :</strong> {{ selectedMatch.categorie }}</p>
      </section>
    </div>
  </div>
</div>
