<!-- Conteneur des toasts (inchangé) -->
<div
  aria-live="polite"
  aria-atomic="true"
  class="fixed top-20 right-4 z-50 flex flex-col gap-3 w-80">

  <!-- Notification animée -->
  <div
    *ngFor="let msg of visibleNotifications; index as i; trackBy: trackById"
    class="relative bg-white rounded-xl shadow-lg border border-gray-100 p-4 flex flex-col gap-2
           transform-gpu
           transition-all duration-300 ease-out
           data-[enter]:animate-in
           data-[exit]:animate-out
           data-[enter]:slide-in-from-right-full
           data-[enter]:fade-in
           data-[exit]:slide-out-to-right-full
           data-[exit]:fade-out"
    [attr.data-enter]="!msg.removing ? '' : null"
    [attr.data-exit]="msg.removing ? '' : null">

    <!-- Entête -->
    <div class="flex items-start justify-between gap-2">
      <div class="flex items-center gap-2">
        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-[var(--Rouge)] to-[var(--Rouge-Foncé)] flex items-center justify-center text-white font-semibold">
          {{ getInitials(msg.sender || {}) }}
        </div>
        <div class="flex">
            <p class="text-sm font-semibold text-gray-800">
              {{ msg.sender?.nom || '' }} {{ msg.sender?.prenom || '' }}
            </p>
            <time class="text-xs text-gray-400">
              {{ msg.createdAt | date:'HH:mm' }}
            </time>
        </div>
          
      </div>

      <!-- Bouton fermer -->
      <button
        type="button"
        (click)="animateAndRemove(msg._id)"
        aria-label="Fermer"
        class="text-gray-400 hover:text-gray-600 transition">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Corps -->
    <p class="text-sm text-gray-700 leading-relaxed">
      {{ msg.text }}
    </p>
  </div>
</div>